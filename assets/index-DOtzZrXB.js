import{u as N,b as U,r,j as e,v as b,e as F,R as g}from"./index-EC21AlHr.js";import{d as M,B as h,T as S}from"./Title-BFEqGuhj.js";import{M as x,a as T}from"./constants-no0C11qV.js";const P="_InputForm_n05te_1",w="_imagePreview_n05te_9",B="_formButtons_n05te_14",C="_errorMessage_n05te_20",s={InputForm:P,imagePreview:w,formButtons:B,errorMessage:C},L=()=>{const j=N(),l=U(),[u,v]=r.useState(M),[i,m]=r.useState(""),[d,o]=r.useState(null),[f,p]=r.useState(null),_=r.useRef(null),c=r.useRef(null),I=n=>{const t=n.target.files?.[0];if(t){if(o(null),!t.type.startsWith("image/")){o("Только изображения!");return}if(t.size>T){o("Файл слишком большой (макс. 5 МБ)");return}c.current&&(URL.revokeObjectURL(c.current),c.current=null);try{const a=URL.createObjectURL(t);c.current=a,v(a)}catch{o("Не удалось обработать изображение. Попробуйте другой файл")}}},E=n=>{n.preventDefault(),p("");const t=i.trim();if(t.length<x){p(`Минимум ${x} символов (введено: ${t.length})`);return}const a={id:b(),text:i,liked:!1,picture:u};j(F(a)),m(""),l(g.home)},R=()=>{l(g.home)};return e.jsx("div",{children:e.jsxs("form",{className:s.InputForm,action:"submit",onSubmit:E,children:[e.jsx("img",{className:s.imagePreview,src:u,alt:"Фото группы"}),e.jsxs("div",{className:s.fileInput,children:[e.jsx("input",{ref:_,type:"file",accept:"image/*",onChange:I,id:"fileInput"}),d&&e.jsx("div",{className:s.errorMessage,children:d})]}),e.jsxs("div",{className:s.textInput,children:[e.jsx("textarea",{id:"comments",name:"comments",value:i,onChange:n=>{m(n.target.value)},placeholder:"Описание",rows:10,cols:50}),f&&e.jsx("div",{className:s.errorMessage,children:f})]}),e.jsxs("div",{className:s.formButtons,children:[e.jsx(h,{type:"submit",children:"Добавить"}),e.jsx(h,{onClick:R,children:"Отменить"})]})]})})};function $(){return e.jsxs("section",{children:[e.jsx(S,{value:"Создание продукта"}),e.jsx(L,{})]})}export{$ as default};
